(function(){var define, self, global, require;!function(){var t;!function(){function e(t,o,n){function i(a,s){if(!o[a]){if(!t[a]){var u=0;if(!s&&u)return u(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=o[a]={exports:{}};t[a][0].call(d.exports,function(e){return i(t[a][1][e]||e)},d,d.exports,e,t,o,n)}return o[a].exports}for(var r=0,a=0;a<n.length;a++)i(n[a]);return i}return e}()({1:[function(e,o,n){var i=function(){function e(e,t){if(!i[e]){i[e]={};for(var o=0;o<e.length;o++)i[e][e.charAt(o)]=o}return i[e][t]}var t=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={},r={compressToBase64:function(e){if(null==e)return"";var t=r._compress(e,6,function(e){return o.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:r._decompress(t.length,32,function(n){return e(o,t.charAt(n))})},compressToUTF16:function(e){return null==e?"":r._compress(e,15,function(e){return t(e+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:r._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=r.compress(e),o=new Uint8Array(2*t.length),n=0,i=t.length;n<i;n++){var a=t.charCodeAt(n);o[2*n]=a>>>8,o[2*n+1]=a%256}return o},decompressFromUint8Array:function(e){if(null===e||void 0===e)return r.decompress(e);for(var o=new Array(e.length/2),n=0,i=o.length;n<i;n++)o[n]=256*e[2*n]+e[2*n+1];var a=[];return o.forEach(function(e){a.push(t(e))}),r.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":r._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),r._decompress(t.length,32,function(o){return e(n,t.charAt(o))}))},compress:function(e){return r._compress(e,16,function(e){return t(e)})},_compress:function(e,t,o){if(null==e)return"";var n,i,r,a={},s={},u="",c="",d="",l=2,f=3,w=2,g=[],m=0,p=0;for(r=0;r<e.length;r+=1)if(u=e.charAt(r),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=f++,s[u]=!0),c=d+u,Object.prototype.hasOwnProperty.call(a,c))d=c;else{if(Object.prototype.hasOwnProperty.call(s,d)){if(d.charCodeAt(0)<256){for(n=0;n<w;n++)m<<=1,p==t-1?(p=0,g.push(o(m)),m=0):p++;for(i=d.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&i,p==t-1?(p=0,g.push(o(m)),m=0):p++,i>>=1}else{for(i=1,n=0;n<w;n++)m=m<<1|i,p==t-1?(p=0,g.push(o(m)),m=0):p++,i=0;for(i=d.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&i,p==t-1?(p=0,g.push(o(m)),m=0):p++,i>>=1}l--,0==l&&(l=Math.pow(2,w),w++),delete s[d]}else for(i=a[d],n=0;n<w;n++)m=m<<1|1&i,p==t-1?(p=0,g.push(o(m)),m=0):p++,i>>=1;l--,0==l&&(l=Math.pow(2,w),w++),a[c]=f++,d=String(u)}if(""!==d){if(Object.prototype.hasOwnProperty.call(s,d)){if(d.charCodeAt(0)<256){for(n=0;n<w;n++)m<<=1,p==t-1?(p=0,g.push(o(m)),m=0):p++;for(i=d.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&i,p==t-1?(p=0,g.push(o(m)),m=0):p++,i>>=1}else{for(i=1,n=0;n<w;n++)m=m<<1|i,p==t-1?(p=0,g.push(o(m)),m=0):p++,i=0;for(i=d.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&i,p==t-1?(p=0,g.push(o(m)),m=0):p++,i>>=1}l--,0==l&&(l=Math.pow(2,w),w++),delete s[d]}else for(i=a[d],n=0;n<w;n++)m=m<<1|1&i,p==t-1?(p=0,g.push(o(m)),m=0):p++,i>>=1;l--,0==l&&(l=Math.pow(2,w),w++)}for(i=2,n=0;n<w;n++)m=m<<1|1&i,p==t-1?(p=0,g.push(o(m)),m=0):p++,i>>=1;for(;;){if(m<<=1,p==t-1){g.push(o(m));break}p++}return g.join("")},decompress:function(e){return null==e?"":""==e?null:r._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(e,o,n){var i,r,a,s,u,c,d,l=[],f=4,w=4,g=3,m="",p=[],h={val:n(0),position:o,index:1};for(i=0;i<3;i+=1)l[i]=i;for(a=0,u=Math.pow(2,2),c=1;c!=u;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=o,h.val=n(h.index++)),a|=(s>0?1:0)*c,c<<=1;switch(a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=o,h.val=n(h.index++)),a|=(s>0?1:0)*c,c<<=1;d=t(a);break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=o,h.val=n(h.index++)),a|=(s>0?1:0)*c,c<<=1;d=t(a);break;case 2:return""}for(l[3]=d,r=d,p.push(d);;){if(h.index>e)return"";for(a=0,u=Math.pow(2,g),c=1;c!=u;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=o,h.val=n(h.index++)),a|=(s>0?1:0)*c,c<<=1;switch(d=a){case 0:for(a=0,u=Math.pow(2,8),c=1;c!=u;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=o,h.val=n(h.index++)),a|=(s>0?1:0)*c,c<<=1;l[w++]=t(a),d=w-1,f--;break;case 1:for(a=0,u=Math.pow(2,16),c=1;c!=u;)s=h.val&h.position,h.position>>=1,0==h.position&&(h.position=o,h.val=n(h.index++)),a|=(s>0?1:0)*c,c<<=1;l[w++]=t(a),d=w-1,f--;break;case 2:return p.join("")}if(0==f&&(f=Math.pow(2,g),g++),l[d])m=l[d];else{if(d!==w)return null;m=r+r.charAt(0)}p.push(m),l[w++]=r+m.charAt(0),f--,r=m,0==f&&(f=Math.pow(2,g),g++)}}};return r}();"function"==typeof t&&t.amd?t(function(){return i}):void 0!==o&&null!=o&&(o.exports=i)},{}],2:[function(e,o,n){(function(e){(function(){!function(e,i){"object"==typeof n&&void 0!==o?o.exports=i():"function"==typeof t&&t.amd?t(i):e.typeDetect=i()}(this,function(){"use strict";function t(e){var t=typeof e;if("object"!==t)return t;if(null===e)return"null";if(e===n)return"global";if(Array.isArray(e)&&(l===!1||!(Symbol.toStringTag in e)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&e===window.location)return"Location";if("object"==typeof window.document&&e===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&e===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&e===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&e instanceof window.HTMLElement){if("BLOCKQUOTE"===e.tagName)return"HTMLQuoteElement";if("TD"===e.tagName)return"HTMLTableDataCellElement";if("TH"===e.tagName)return"HTMLTableHeaderCellElement"}}var i=l&&e[Symbol.toStringTag];if("string"==typeof i)return i;var d=Object.getPrototypeOf(e);return d===RegExp.prototype?"RegExp":d===Date.prototype?"Date":o&&d===Promise.prototype?"Promise":a&&d===Set.prototype?"Set":r&&d===Map.prototype?"Map":u&&d===WeakSet.prototype?"WeakSet":s&&d===WeakMap.prototype?"WeakMap":c&&d===DataView.prototype?"DataView":r&&d===m?"Map Iterator":a&&d===g?"Set Iterator":p&&d===h?"Array Iterator":v&&d===y?"String Iterator":null===d?"Object":Object.prototype.toString.call(e).slice(8,-1)}var o="function"==typeof Promise,n="object"==typeof self?self:e,i="undefined"!=typeof Symbol,r="undefined"!=typeof Map,a="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,u="undefined"!=typeof WeakSet,c="undefined"!=typeof DataView,d=i&&void 0!==Symbol.iterator,l=i&&void 0!==Symbol.toStringTag,f=a&&"function"==typeof Set.prototype.entries,w=r&&"function"==typeof Map.prototype.entries,g=f&&Object.getPrototypeOf((new Set).entries()),m=w&&Object.getPrototypeOf((new Map).entries()),p=d&&"function"==typeof Array.prototype[Symbol.iterator],h=p&&Object.getPrototypeOf([][Symbol.iterator]()),v=d&&"function"==typeof String.prototype[Symbol.iterator],y=v&&Object.getPrototypeOf(""[Symbol.iterator]());return t})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,o){var n=e("./v1"),i=e("./v4"),r=i;r.v1=n,r.v4=i,t.exports=r},{"./v1":6,"./v4":7}],4:[function(e,t,o){function n(e,t){var o=t||0,n=i;return n[e[o++]]+n[e[o++]]+n[e[o++]]+n[e[o++]]+"-"+n[e[o++]]+n[e[o++]]+"-"+n[e[o++]]+n[e[o++]]+"-"+n[e[o++]]+n[e[o++]]+"-"+n[e[o++]]+n[e[o++]]+n[e[o++]]+n[e[o++]]+n[e[o++]]+n[e[o++]]}for(var i=[],r=0;r<256;++r)i[r]=(r+256).toString(16).substr(1);t.exports=n},{}],5:[function(e,t,o){(function(e){(function(){var o,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var i=new Uint8Array(16);o=function(){return n.getRandomValues(i),i}}if(!o){var r=new Array(16);o=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}t.exports=o}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,o){function n(e,t,o){var n=t&&o||0,i=t||[];e=e||{};var a=void 0!==e.clockseq?e.clockseq:u,l=void 0!==e.msecs?e.msecs:(new Date).getTime(),f=void 0!==e.nsecs?e.nsecs:d+1,w=l-c+(f-d)/1e4;if(w<0&&void 0===e.clockseq&&(a=a+1&16383),(w<0||l>c)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=l,d=f,u=a,l+=122192928e5;var g=(1e4*(268435455&l)+f)%4294967296;i[n++]=g>>>24&255,i[n++]=g>>>16&255,i[n++]=g>>>8&255,i[n++]=255&g;var m=l/4294967296*1e4&268435455;i[n++]=m>>>8&255,i[n++]=255&m,i[n++]=m>>>24&15|16,i[n++]=m>>>16&255,i[n++]=a>>>8|128,i[n++]=255&a;for(var p=e.node||s,h=0;h<6;++h)i[n+h]=p[h];return t?t:r(i)}var i=e("./lib/rng"),r=e("./lib/bytesToUuid"),a=i(),s=[1|a[0],a[1],a[2],a[3],a[4],a[5]],u=16383&(a[6]<<8|a[7]),c=0,d=0;t.exports=n},{"./lib/bytesToUuid":4,"./lib/rng":5}],7:[function(e,t,o){function n(e,t,o){var n=t&&o||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[n+s]=a[s];return t||r(a)}var i=e("./lib/rng"),r=e("./lib/bytesToUuid");t.exports=n},{"./lib/bytesToUuid":4,"./lib/rng":5}],8:[function(e,t,o){function n(e){return e&&"object"===s(e).toLowerCase()}function i(e){var t=["amigo","customData","personData","sessionData","deviceData","transactionData"],o={};return o.amigo=e.amigo,Object.keys(e).forEach(function(n){var i=e[n];t.indexOf(n)===-1?o.amigo[n]=i:o[n]=i}),Object.keys(o.amigo).forEach(function(e){o.amigo[e]=u(o.amigo[e])}),o}function r(e){return window.location.search.substr(1).split("&").reduce(function(e,t){var o=t.split("=");return e[o[0]]=o[1],e},{})[e]}function a(e,t){var o;if(n(t)){var a={};Object.keys(t).forEach(function(e){e&&"_"!==e[0]&&(a[e]=t[e])}),o=c.cloneAndReplaceAll(a)}else o={};n(o.amigo)||(o.amigo={}),o.amigo.apiKey=e.runtime.apiKey,o.amigo.location=window.location.href,o.amigo.locationName=document.title,o.amigo.referrer=document.referrer,o.amigo.cookiesEnabled=!0,o.amigo.pageLoadId=window.Amigo&&window.Amigo.pageLoadId?window.Amigo.pageLoadId:null,o.amigo.timezone=(new Date).getTimezoneOffset();var s;try{s=r("amigo_device"),s||(s=r("amigo_fp")),s&&window.Amigo.store.saveDeviceID(s)}catch(e){}var u=s||window.Amigo.store.getDeviceID();u||(u=d.v4(),window.Amigo.store.saveDeviceID(u));var l;try{l=r("amigo_session"),l&&window.Amigo.store.saveSessionID(l)}catch(e){}var f=l||window.Amigo.store.getSessionID();f||(f=d.v4(),window.Amigo.store.saveSessionID(f));var w=window.Amigo.store.getPrevStorageID();return w&&(o.amigo.prevStorageId=w),o.amigo.fingerprint=u,o.amigo.sessionId=f,i(o)}var s=e("type-name"),u=e("./lib/stringify"),c=(e("../store"),e("../../util/security-checks")),d=e("uuid");t.exports=a},{"../../util/security-checks":27,"../store":13,"./lib/stringify":9,"type-name":10,uuid:12}],9:[function(e,t,o){function n(e){switch(i(e)){case"string":return e;case"Boolean":case"boolean":case"Date":case"String":return e.toString();case"number":case"Number":return""+e;case"Object":case"array":case"Array":return JSON.stringify(e);case"undefined":return"undefined";default:return""}}var i=e("type-name");t.exports=n},{"type-name":10}],10:[function(e,t,o){"use strict";function n(e){return e.name?e.name:/^\s*function\s*([^\(]*)/im.exec(e.toString())[1]}function i(e){var t=a.call(e).slice(8,-1);return"Object"===t&&e.constructor?n(e.constructor):t}function r(e){var t;return null===e?"null":(t=typeof e,"object"===t?i(e):t)}var a=Object.prototype.toString;t.exports=r},{}],11:[function(e,t,o){(function(e){(function(){var o,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var i=new Uint8Array(16);o=function(){return n.getRandomValues(i),i}}if(!o){var r=new Array(16);o=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}t.exports=o}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(e,t,o){function n(e,t,o){var n=t&&o||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){i<16&&(t[n+i++]=c[e])});i<16;)t[n+i++]=0;return t}function i(e,t){var o=t||0,n=u;return n[e[o++]]+n[e[o++]]+n[e[o++]]+n[e[o++]]+"-"+n[e[o++]]+n[e[o++]]+"-"+n[e[o++]]+n[e[o++]]+"-"+n[e[o++]]+n[e[o++]]+"-"+n[e[o++]]+n[e[o++]]+n[e[o++]]+n[e[o++]]+n[e[o++]]+n[e[o++]]}function r(e,t,o){var n=t&&o||0,r=t||[];e=e||{};var a=void 0!==e.clockseq?e.clockseq:w,s=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:m+1,c=s-g+(u-m)/1e4;if(c<0&&void 0===e.clockseq&&(a=a+1&16383),(c<0||s>g)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=s,m=u,w=a,s+=122192928e5;var d=(1e4*(268435455&s)+u)%4294967296;r[n++]=d>>>24&255,r[n++]=d>>>16&255,r[n++]=d>>>8&255,r[n++]=255&d;var l=s/4294967296*1e4&268435455;r[n++]=l>>>8&255,r[n++]=255&l,r[n++]=l>>>24&15|16,r[n++]=l>>>16&255,r[n++]=a>>>8|128,r[n++]=255&a;for(var p=e.node||f,h=0;h<6;h++)r[n+h]=p[h];return t?t:i(r)}function a(e,t,o){var n=t&&o||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var r=e.random||(e.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var a=0;a<16;a++)t[n+a]=r[a];return t||i(r)}for(var s=e("./rng"),u=[],c={},d=0;d<256;d++)u[d]=(d+256).toString(16).substr(1),c[u[d]]=d;var l=s(),f=[1|l[0],l[1],l[2],l[3],l[4],l[5]],w=16383&(l[6]<<8|l[7]),g=0,m=0,p=a;p.v1=r,p.v4=a,p.parse=n,p.unparse=i,t.exports=p},{"./rng":11}],13:[function(e,t,o){function n(e){this.apiKey=e.runtime.apiKey,this.storageLimit=20;try{new a("amigo",this.apiKey,!0),new a("amigo-session",this.apiKey,!0)}catch(e){}this.deviceId=new s("amigo-id",this.apiKey),this.sessionId=new s("amigo-session-id",this.apiKey),this.prevStorageID=new s("amigo-store-id",this.apiKey)}function i(e){return e?e.id||null:null}function r(){return s.available()}var a=e("./lib/cookie-storage"),s=e("./lib/hybrid-storage");n.prototype.saveDeviceID=function(e){var t=new Date(Date.now()+315576e5);this.deviceId.setItem({id:e},t)},n.prototype.getDeviceID=function(){var e=i(this.deviceId.getItem(new Date));return e&&this.saveDeviceID(e),e},n.prototype.savePrevStorageID=function(e){var t=new Date(Date.now()+315576e5);this.prevStorageID.setItem({id:e},t)},n.prototype.getPrevStorageID=function(){var e=i(this.prevStorageID.getItem(new Date));return e&&this.savePrevStorageID(e),e};n.prototype.saveSessionID=function(e){var t=new Date(Date.now()+72e5);this.sessionId.setItem({id:e},t)},n.prototype.getSessionID=function(){var e=i(this.sessionId.getItem(new Date));return e&&this.saveSessionID(e),e},t.exports=n,t.exports.available=r},{"./lib/cookie-storage":14,"./lib/hybrid-storage":15}],14:[function(e,t,o){function n(e,t,o){a.defaults.secure=!1,this.name=e;var n=e+"-"+t.substr(0,6),i=e+"-"+t;if(u.hasItem(i)&&(u.setItem(this.name,u.getItem(i)),u.removeItem(i)),u.hasItem(n)&&(u.setItem(this.name,u.getItem(n)),u.removeItem(n)),o===!0)return void(u.hasItem(this.name)&&u.removeItem(this.name));try{if(!this.hasItem())return void this.setItem([]);var r=s(this.getItem()).toLowerCase();["array","object"].indexOf(r)===-1&&this.setItem([])}catch(e){}}function i(e,t){if(t.length<=2)return e;for(var o=t[t.length-1],n=t.length-2;n>=0;n--){if(c[o])return t[n]+"."+o;o=t[n]+"."+o}}function r(){var e=document.domain;if(!e)return null;var t=e.split("."),o=i(e,t);if(o)return o;for(var n="amigo-host-check-"+(new Date).getTime(),r=null,s=0,u=t.length;s<u;s++)if(r=t.slice(u-1-s,u).join("."),a.set(n,n,{domain:r}),document.cookie.indexOf(n)!==-1)return a.remove(n,{domain:r}),r;return null}var a=e("js-cookie"),s=e("type-name"),u={setItem:function(e,t,o){var i={};o?i.expires=o:e.indexOf("session")===-1&&(i.expires=365),i.domain=n.prototype.getCurrentDomain(),a.set(e,t,i)},getItem:function(e){try{return JSON.parse(a.get(e))}catch(e){return null}},hasItem:function(e){return!!u.getItem(e)},removeItem:function(e){u.hasItem(e)&&a.remove(e,{domain:n.prototype.getCurrentDomain()})}};n.isUsable=function(){var e="amigo-cookie-check-"+(new Date).getTime();try{a.set(e,e)}catch(e){return!1}return!!a.get(e)&&(a.remove(e),!0)},n.getItem=function(e){return u.getItem(e)},n.prototype.setItem=function(e,t){u.setItem(this.name,e,t)},n.prototype.getItem=function(){return u.getItem(this.name)},n.prototype.hasItem=function(){return u.hasItem(this.name)},n.prototype.removeItem=function(){u.removeItem(this.name)};var c={com:!0,"co.uk":!0};n.prototype.guessDomain=i,n.prototype.getCurrentDomain=r,t.exports=n},{"js-cookie":17,"type-name":18}],15:[function(e,t,o){function n(e){this.name=e,this.store=new a(e)}function i(){return a.available()}var r=e("./cookie-storage"),a=e("./localstorage-storage");n.prototype.getItem=function(e){try{var t=r.getItem(this.name);if(null!==t&&void 0!==t)return t}catch(e){}return this.store.getItem(e)},n.prototype.setItem=function(e,t){this.store.setItem(e,t),window.Amigo&&window.Amigo.config&&window.Amigo.config.idCookieSync&&r.prototype.hasItem.call({name:this.name})&&r.prototype.setItem.call({name:this.name},JSON.stringify(e),t)},t.exports=n,t.exports.available=i},{"./cookie-storage":14,"./localstorage-storage":16}],16:[function(e,t,o){function n(e){this.name="amigo-"+e,this.ttl=this.name+"-ttl"}function i(){var e="amigo-test-"+new Date;try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}n.prototype.setItem=function(e,t){window.localStorage.setItem(this.name,JSON.stringify(e)),t&&window.localStorage.setItem(this.ttl,t.getTime())},n.prototype.getItem=function(e){var t=window.localStorage.getItem(this.ttl);if(t){var o=e;o||(o=new Date);try{if(parseInt(t,10)<o.getTime())return this.removeItem(),null}catch(e){}}try{return JSON.parse(window.localStorage.getItem(this.name))}catch(e){return null}},n.prototype.hasItem=function(){return!!this.getItem()},n.prototype.removeItem=function(){window.localStorage.removeItem(this.name),window.localStorage.removeItem(this.ttl)},t.exports=n,t.exports.available=i},{}],17:[function(e,o,n){!function(e){var i=!1;if("function"==typeof t&&t.amd&&(t(e),i=!0),"object"==typeof n&&(o.exports=e(),i=!0),!i){var r=window.Cookies,a=window.Cookies=e();a.noConflict=function(){return window.Cookies=r,a}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var o=arguments[e];for(var n in o)t[n]=o[n]}return t}function t(o){function n(t,i,r){var a;if("undefined"!=typeof document){if(arguments.length>1){if(r=e({path:"/"},n.defaults,r),"number"==typeof r.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*r.expires),r.expires=s}r.expires=r.expires?r.expires.toUTCString():"";try{a=JSON.stringify(i),/^[\{\[]/.test(a)&&(i=a)}catch(e){}i=o.write?o.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape);var u="";for(var c in r)r[c]&&(u+="; "+c,r[c]!==!0&&(u+="="+r[c]));return document.cookie=t+"="+i+u}t||(a={});for(var d=document.cookie?document.cookie.split("; "):[],l=0;l<d.length;l++){var f=d[l].split("="),w=f.slice(1).join("=");this.json||'"'!==w.charAt(0)||(w=w.slice(1,-1));try{var g=f[0].replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent);if(w=o.read?o.read(w,g):o(w,g)||w.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent),this.json)try{w=JSON.parse(w)}catch(e){}if(t===g){a=w;break}t||(a[g]=w)}catch(e){}}return a}}return n.set=n,n.get=function(e){return n.call(n,e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,o){n(t,"",e(o,{expires:-1}))},n.withConverter=t,n}return t(function(){})})},{}],18:[function(e,t,o){arguments[4][10][0].apply(o,arguments)},{dup:10}],19:[function(t,o,n){function i(e,t){var o=Object.keys(e);if(o.length!==Object.keys(t).length)return!1;for(var n=0;n<o.length;n++)if(e[o[n]]!==t[o[n]])return!1;o=Object.keys(t);for(var n=0;n<o.length;n++)if(e[o[n]]!==t[o[n]])return!1;return!0}function r(t,o){if(!window.Amigo||!window.Amigo.shutdown){var n={},r=window.Amigo.lastLoadData;if(r&&(n.sessionId=r.sessionId),"string"==typeof t)n.apiKey=t;else for(var a in t)n[a]=t[a];if("string"==typeof o||o instanceof Error)n.message=o;else for(var a in o)n[a]=o[a];if(n=y.cloneAndReplaceAll(n),n._=window.amigoConfig&&window.amigoConfig.log&&window.amigoConfig.log.unix||+new Date,n.loc=window.location.href,"amigoConfig"in window&&window.amigoConfig.forceConsoleLogging&&console.warn("[AMIGO_LOG]",n),!n.message||0!==n.message.indexOf("Element not ready after timeout")){if(!window.Amigo||!window.Amigo.util||!window.Amigo.util.log||"function"!=typeof fetch){var s=new Image,u=[];for(a in n)u.push(encodeURIComponent(a)+"="+encodeURIComponent(n[a]));return void(s.src="https://log.getamigo.io/pixel.gif?"+u.join("&"))}window.Amigo.util.log.t||(window.Amigo.util.log.t=setTimeout(function(){if(!window.Amigo||!window.Amigo.util||!window.Amigo.util.log)return void("amigoConfig"in window&&window.amigoConfig&&window.amigoConfig.forceConsoleLogging&&console.warn("[AMIGO_LOG] Amigo removed before log",e));if(window.Amigo.util.log.q){var t,o,n,r=[];e:for(var a=0;a<window.Amigo.util.log.q.length;a++){var s=window.Amigo.util.log.q[a];s.apiKey&&(t=s.apiKey),s.sessionId&&(o=s.sessionId),s.loc&&(n=s.loc),delete s.apiKey,delete s.sessionId,delete s.loc;var u=s._;delete s._;for(var c=0;c<r.length;c++)if(i(s,r[c].b)){r[c].t.push(u);continue e}r.push({b:s,t:[u]})}var d={};return t&&(d.apiKey=t),o&&(d.sessionId=o),n&&(d.loc=n),window.Amigo.util.log.t=null,window.Amigo.util.log.q=[],fetch("https://log.getamigo.io/v2",{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({b:d,c:r})}).catch(function(e){"amigoConfig"in window&&window.amigoConfig.forceConsoleLogging&&console.warn("[AMIGO_LOG] error with log dispatch",e)})}},window.amigoConfig&&window.amigoConfig.log&&window.amigoConfig.log.d||5e3)),window.Amigo.util.log.q||(window.Amigo.util.log.q=[]),window.Amigo.util.log.q.push(n)}}}function a(){this.listeners={}}function s(e,t,o){if(!window.Amigo||!window.Amigo.shutdown){void 0!==t&&(window.Amigo.eventData||(window.Amigo.eventData={}),window.Amigo.eventData[e]=t),window.Amigo.emitHistory||(window.Amigo.emitHistory=new D(100)),window.Amigo.emitHistory.add(e);try{window.Amigo.loopDetection||(window.Amigo.loopDetection={}),window.Amigo.loopDetection.events||(window.Amigo.loopDetection.events=new b(1e3,100,30,45)),window.Amigo.loopDetection.events.addAndCheck()&&!window.Amigo.loopDetection.eventsLooping&&(window.Amigo.loopDetection.eventsLooping=!0,u("event"))}catch(e){window.Amigo&&window.Amigo.util&&window.Amigo.util.log&&window.Amigo.util.log({message:"could not run event loop code",error:e})}var n,i=void 0!==t?t:{};if("function"==typeof CustomEvent)n=new CustomEvent(e,{detail:i});else try{n=document.createEvent("CustomEvent"),n.initCustomEvent(e,!1,!1,i)}catch(t){try{n=document.createEvent("Event"),n.initEvent(e,!1,!1)}catch(e){throw new Error("No event creation method supported errors:",[t,e])}}n&&window.Amigo.dispatchEvent(n),o&&o.isBroadcast||window.Amigo.broadcasts.forEach(function(o){try{o([e,t,{isBroadcast:!0}])}catch(e){r(window.amigoConfig.apiKey,e)}})}}function u(e){if(!window.Amigo||!window.Amigo.util||!window.Amigo.util.log)throw new Error("could not logLoop, Amigo not initiated");var t=[];window.Amigo.emitHistory&&(t=window.Amigo.emitHistory.readout());var o={message:"Loop Detected: type "+e,pageLoadId:window.Amigo.pageLoadId,eventHistory:t};window.Amigo.util.log(o)}function c(e,t){function o(o,n){if(!window.Amigo||!window.Amigo.shutdown){try{window.Amigo.loopDetection||(window.Amigo.loopDetection={}),window.Amigo.loopDetection.loads||(window.Amigo.loopDetection.loads=new b(1e4,10,5,6)),window.Amigo.loopDetection.loads.addAndCheck()&&!window.Amigo.loopDetection.loadsLooping&&(window.Amigo.loopDetection.loadsLooping=!0,u("loads"))}catch(e){window.Amigo&&window.Amigo.util&&window.Amigo.util.log&&window.Amigo.util.log({message:"could not run load loop code",error:e})}var i={runtime:{apiKey:e}},r=p();r.sessionData=r.sessionData||{},r.sessionData.loadCampaign=n||null;var a=h(i,r);window.Amigo.lastLoadData=a.amigo;var s,c=document,d="script",l="amigo-js-dyn-sdk-"+(new Date).getTime(),f=Object.keys(window.Amigo.Plugins),w=v.compress(t,a,f,o),g=c.getElementsByTagName(d)[0],m=c.getElementById(l);m&&(m.parentNode.removeChild(m),g=c.getElementsByTagName(d)[0]),s=c.createElement(d),s.id=l,s.fetchPriority="high",s.src="https://tag.getamigo.io/sdk/amigo.min.js?d="+w+"&_="+(new Date).getTime(),g.parentNode.insertBefore(s,g)}}window.Amigo.load=function(e,t){var n=o.bind(window.Amigo,e,t);return"function"==typeof O?O(n):n()}}function d(){window.Amigo=window.Amigo||{},window.Amigo.Errors=window.Amigo.Errors||[],window.Amigo.Plugins=window.Amigo.Plugins||{},window.Amigo.pageLoadCallbacks=window.Amigo.pageLoadCallbacks||[],window.Amigo.broadcasts=window.Amigo.broadcasts||[],window.amigoData=window.amigoData||{},window.amigoData.customData=window.amigoData.customData||{},window.amigoData.personData=window.amigoData.personData||{},window.amigoData.sessionData=window.amigoData.sessionData||{},window.amigoData.deviceData=window.amigoData.deviceData||{},window.amigoData.transactionData=window.amigoData.transactionData||{},window.amigoData.browserData=window.amigoData.browserData||{}}function l(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){e()}):e()}function f(){var e=window.amigoConfig;if(!e)return r("undefined","No Amigo configuration variable found");if(!("apiKey"in e))return r("undefined","No API key provided");var t=e.apiKey;d();var o=m();if("number"==typeof o&&o<=10){var n="Unsupported Browser: Internet Explorer "+o;return window.Amigo.Errors.push(n),r(t,n)}if(!w.available()){var n="Storage system not available";return window.Amigo.Errors.push(n),r(t,n)}if(!window.Amigo.addEventListener){var i=window.Amigo;window.Amigo=new a;for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(window.Amigo[u]=i[u])}window.Amigo.emit=window.Amigo.emit||s,window.Amigo.eventData=window.Amigo.eventData||{};var f=window.location;return window.Amigo.currentURL=f.href,window.Amigo.pageLoadId=A.v4(),window.Amigo.store=new w({runtime:{apiKey:t}}),window.Amigo.util=window.Amigo.util||{},window.Amigo.util.rawlog=window.Amigo.util.rawlog||r,window.Amigo.util.log=window.Amigo.util.log||r.bind(this,{apiKey:window.amigoConfig.apiKey}),window.Amigo.jit=window.Amigo.jit||I.wrapConf,window.Amigo.util.uuid=window.Amigo.util.uuid||A,g(function(e){function o(){for(var e;e=window.Amigo.pageLoadCallbacks.shift();)try{e.fn()}catch(e){r(t,e)}}function n(){window.Amigo.suspendListeners||window.location.href===window.Amigo.currentURL||(o(),window.Amigo.AF&&window.Amigo.AF.recalculate&&window.Amigo.AF.recalculate(),window.Amigo.load()),window.Amigo.currentURL=window.location.href}if(c(t,e),window.location.href!==window.Amigo.currentURL&&(window.Amigo.currentURL=window.location.href,window.Amigo.load()),window.Amigo.listeners.hashchange||window.addEventListener("hashchange",n),window.Amigo.listeners.popstate||window.addEventListener("popstate",n),!window.Amigo.listeners.pushstate&&(window.Amigo.addEventListener("pushstate",n),"history"in window&&"pushState"in window.history)){var i=window.history.pushState;window.history.pushState=function(){i.apply(this,arguments),window.Amigo.emit("pushstate",{state:arguments[0],title:arguments[1],url:arguments[2]})}}if(!window.Amigo.listeners.replacestate&&(window.Amigo.addEventListener("replacestate",n),"history"in window&&"replaceState"in window.history)){var a=window.history.replaceState;window.history.replaceState=function(){a.apply(this,arguments),window.Amigo.emit("replacestate",{state:arguments[0],title:arguments[1],url:arguments[2]})}}window.Amigo.listeners.AMIGO_RELOAD||window.Amigo.addEventListener("AMIGO_RELOAD",function(){o(),window.Amigo.load()}),window.Amigo.listeners.AMIGO_RELOAD_NO_CB||window.Amigo.addEventListener("AMIGO_RELOAD_NO_CB",function(){window.Amigo.load()}),l(window.Amigo.load)})}var w=t("../plugins/store"),g=t("./page-support"),m=t("./detect-ie"),p=t("../util/get-amigo-data"),h=t("../plugins/data-augmenter"),v=t("../util/data-compression"),y=t("../util/security-checks"),A=t("uuid"),b=t("../util/loop-detection"),D=t("../util/ring-buffer"),I=t("../util/get-data-from-conf"),O=function(){/*v1.0.0*/!function(t){"use strict";function e(t){return Array.isArray(t)?t:[t]}function n(t){return"number"==typeof t&&!(t<0||t>100)}function i(t,e){var i=t.percentAllowed,o=t.numChars,r=void 0===o?2:o;if(Number.isNaN(parseInt(i,10)))throw new Error("[split-traffic] percentAllowed must be a number (given "+(void 0===i?"undefined":E(i))+")");if(!n(i))throw new Error("[split-traffic] percentAllowed is outside of range 0-100 (given "+i+")");if(r<1||r>32)throw new Error("[split-traffic] numChars must be between 1 and 32 (given "+r+")");var a=e.replace(/-/g,"");return 0!==i&&(100===i||parseInt(a.substring(0,r).toLowerCase(),16)*(100/(Math.pow(16,r)-1))<=i)}function o(t,e){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),o=i.top,r=i.bottom;return o<n.top+n.height&&r>n.top}function r(t,e){var n=t.getBoundingClientRect();return e.getBoundingClientRect().top<n.top}function a(t,e){return t.reduce(function(t,n){return t[e(n)?0:1].push(n),t},[[],[]])}function s(t,e,n){if(n)return e?e(t()):t();try{var i=Promise.resolve(t());return e?i.then(e):i}catch(t){return Promise.reject(t)}}function c(t){var e=document.createElement("div");return e.classList.add("amigo-option"),e.setAttribute("data-identifier",t.id),e.innerHTML='\n        <h4 class="amigo-group-heading">\n            <div>\n                '+t.title+'\n                <span class="amigo-selected-value"></span>\n            </div>\n            <span class="amigo-price-from"></span>\n        </h4>\n        <div class="amigo-options amigo-flex amigo-flex-wrap" data-suboption="true" data-section-id="'+t.title+'" data-option-id="'+t.id+'"></div>\n    ',e}function u(t){var e=document.createElement("details");return e.setAttribute("data-identifier",t.id||t.title),e.setAttribute("data-native-section",t.nativeSection||t.subOptions&&t.subOptions.length>0&&t.subOptions[t.subOptions.length-1].nativeSection),e.innerHTML='\n        <summary class="amigo-option-header">\n            '+t.title+"\n            "+(t.subOptions?"":'<span class="amigo-price-from"></span>')+"\n        </summary>\n        "+(t.subOptions?'\n                <div class="amigo-suboptions">\n                    '+t.subOptions.map(function(t){return c(t).outerHTML}).join("")+"\n                </div>\n            ":'\n                <div class="amigo-option" data-identifier="'+t.id+'">\n                    <p class="amigo-selected-value"></p>\n                    <div class="amigo-options amigo-flex amigo-flex-wrap" data-section-id="'+t.title+'" data-option-id="'+t.id+'"></div>\n                </div>\n            ')+"\n    ",e}function l(){}function d(t,e,n){if(n)return e?e(t()):t();try{var i=Promise.resolve(t());return e?i.then(e):i}catch(t){return Promise.reject(t)}}function f(t,e){return d(t,l,e)}function p(t,e){var n=t();return n&&n.then?n.then(e):e(n)}function m(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function g(t){return 0===t.items.filter(function(t){return!["noval","Y","N"].includes(t.identifier)}).length}function v(t){return(t.items.find(function(t){return t.longText})||{}).longTextValue||""}function h(t){return(t.items.find(function(t){return"Y"===t.identifier})||{}).assigned||""}function w(t){return t.items.some(function(t){return t.mediaDescriptor&&t.mediaDescriptor[0]})}function y(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}function _(t){if("function"==typeof t.target.closest){var e=t.target.closest("gg-tooltip");document.querySelectorAll(".tooltip--open").forEach(function(t){t!==e&&t.classList.remove("tooltip--open")})}}function b(t){for(var e=[],n=t.parentNode;n&&n!==document;n=n.parentNode)e.push(n);return e}function S(){return new Promise(function(t,e){if(window.amigoData.language=document.documentElement.lang,$t.test(location.href)){window.amigoData.customData.configurator=window.amigoData.customData.configurator||{};var n=!1,i=!1,o=setInterval(function(){if(!n){var e=/^McLaren (.*) Configurator/.exec(document.title);e&&e[1]&&(window.amigoData.customData.configurator.model=e[1].toLowerCase(),n=!0)}if(!i)try{var r=localStorage.getItem("queryParams"),a=void 0;if(r&&(a=JSON.parse(r).configCountry),!a){var s=G("configCountry");zt.test(s)&&(a=zt.exec(s)[1])}a&&(window.amigoData.customData.configurator.market=a,i=!0)}catch(t){}n&&i&&(clearInterval(o),t())},50);setTimeout(function(){o&&(clearInterval(o),window.Amigo.AF.remove(),e())},4e3)}else t()})}function P(t){window.amigoData.customData.experienceDiceRolls=bt(Gt),window.Amigo.IP=window.Amigo.IP||{},window.Amigo.IP.plugins||(window.Amigo.IP.plugins=Yt),window.amigoData.customData.viewportSize=St(),S().then(function(){return t()})}var E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},I=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),A=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},O=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},k=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},x=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),H=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},T=function(t,e,n){for(var i=e.split("."),o=void 0,r=t;i.length;){if(!r)return null;o=i.shift(),i.length?r[o]="object"===E(r[o])?r[o]:{}:r[o]=n,r=r[o]}return t},D=function(t){return"string"!=typeof t?new U(!1,j):""===t.trim()?new U(!1,q):new U(!0)},L=function(t){return void 0===t||null===t||"string"==typeof t&&""===t.trim()?new U(!1,B):"object"===(void 0===t?"undefined":E(t))?new U(!1,X):new U(!0)},N=function(t){return"object"!==(void 0===t?"undefined":E(t))||null===t?new U(!1,M):new U(!0)},R="Can't construct ValidationResponse without reason when not valid",q="Name parameter cannot be empty.",j="Name parameter must be a string.",B="Value cannot be null or empty string",M="Given value is not JSON.",X="Value can't be an Object.",U=function(){function t(e,n){if(C(this,t),!e&&void 0===n)throw new Error(R);this.valid=e,this.reason=n}return I(t,[{key:"throwIfInvalid",value:function(){if(!this.valid)throw new Error(this.reason)}}]),t}(),J=function(t,e){if(-1!==[null,void 0,""].indexOf(e))return t;for(var n=e.split("."),i=[],o=t;n.length;){if(!o)return null;i.push(o),o=o[n.shift()]}for(n=e.split(".");i.length;){var r=i.pop();if(delete r[n.pop()],Object.keys(r).length>0)return t}return t},F=function(t,e){D(t).throwIfInvalid(),L(e).throwIfInvalid(),sessionStorage.setItem(t,e)},K=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};D(t).throwIfInvalid(),L(e).throwIfInvalid();var i=void 0;i=n.domain?n.domain:et||(et=Q());var o=t+"="+encodeURIComponent(e)+";domain="+encodeURIComponent(i)+";path="+(n.path||"/");if(n&&n.expires){var r=void 0,a=n.expires.days||n.expires.hours||n.expires.minutes||n.expires.seconds;if(n.expires.at)r=n.expires.at;else if(a){var s=0;n.expires.days&&(s+=864e5*n.expires.days),n.expires.hours&&(s+=36e5*n.expires.hours),n.expires.minutes&&(s+=6e4*n.expires.minutes),n.expires.seconds&&(s+=1e3*n.expires.seconds);var c=new Date,u=new Date;u.setTime(c.getTime()+s),r=u.toUTCString()}o=void 0!==r?o+";expires="+r:o}document.cookie=o},W=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};D(t).throwIfInvalid();var n=new Date;e.expires={at:new Date(n.getTime()-6e4).toUTCString()},K(t,"remove",e)},V=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};N(e).throwIfInvalid(),F(t,JSON.stringify(e),n)},Y=function(t){var e=sessionStorage.getItem(t);if(!e){if(D(t).throwIfInvalid(),!document.cookie)return null;for(var n=new RegExp("^"+t+"=(.*)"),i=document.cookie.split(";"),o=0,r=i.length;o<r;o+=1){var a=n.exec(i[o].trim());if(a&&a[1]){e=decodeURIComponent(a[1]),F(t,e),W(t);break}}}return e},G=function(t){if(D(t).throwIfInvalid(),!document.cookie)return null;for(var e=new RegExp("^"+t+"=(.*)"),n=document.cookie.split(";"),i=0,o=n.length;i<o;i+=1){var r=e.exec(n[i].trim());if(r&&r[1])return decodeURIComponent(r[1])}return null},$=function(t){var e=Y(t);if(!e)return null;try{return JSON.parse(e)}catch(t){throw new Error(tt)}},z=function(t){return!!G(t)},Z=function(t,e){if(e.length<=2)return t;for(var n=e[e.length-1],i=e.length-2;i>=0;i--){if(nt[n])return e[i]+"."+n;n=e[i]+"."+n}},Q=function(){var t=document.domain,e=t.split("."),n=Z(t,e);if(n)return n;for(var i="_gd"+(new Date).getTime(),o=null,r=0,a=e.length;r<a;r++){var s={domain:o=e.slice(a-1-r,a).join(".")};if(K(i,i,s),z(i))return W(i,s),o}return null},tt="Cookie value is not JSON. Use getCookie() instead.",et=void 0,nt={com:!0,"co.uk":!0},it=(function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};C(this,t),this.name=e,this.options=n}I(t,[{key:"getJSON",value:function(){return $(this.name,this.options)}},{key:"setJSON",value:function(t,e){if(1===arguments.length&&(e=t,t=null),t)try{var n=$(this.name,this.options)||{},i=T(n,t,e);V(this.name,i,this.options)}catch(t){if(t.message===tt)throw new Error("Can't update path of a non-JSON cookie");throw t}else V(this.name,e,this.options)}},{key:"get",value:function(){return Y(this.name,this.options)}},{key:"set",value:function(t){F(this.name,t,this.options)}},{key:"remove",value:function(t){if(void 0===t||null===t)W(this.name,this.options);else try{var e=this.getJSON();J(e,t),0===Object.keys(e).length?W(this.name,this.options):null!==e&&this.setJSON(e)}catch(t){if(t.message===tt)throw new Error("Can't remove path of a non-JSON cookie");throw t}}}])}(),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],i=e.pollInterval||ot,o=e.pollTimeout||rt,r=e.timeoutCallback||function(){},a=0,s=null,c=function(){if((a+=i)>=o)return window.clearInterval(s),r();var e=t();return null!==e?(window.clearInterval(s),n(e)):null};return null===c()&&(a=0,s=window.setInterval(c,i)),s}),ot=50,rt=1e4,at=function(t,e){if(!e)return function(){};return function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];if(window.amigoConfig&&window.amigoConfig.forceConsoleLogging&&console){var o;(o=console).log.apply(o,["AMIGO_IP:"+t+":"].concat(n))}}},st=(new at("Amigo Events",!0),function(t){return JSON.parse(JSON.stringify(t))}),ct=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?[]:1===e.length?Array.isArray(e[0])?e[0]:void 0!==e[0]&&null!==e[0]?[e[0]]:[]:e},ut=function(t,e){if(!(this instanceof ut))throw new Error(lt);if("string"!=typeof t)throw new Error(dt);if(!Array.isArray(e))throw new Error(ft);window.Amigo.IP=window.Amigo.IP||{},window.Amigo.IP.loaded=window.Amigo.IP.loaded||{},this.root=window.Amigo.IP.loaded,this.parent=t,this.keys=e,this.root[this.parent]||(this.root[this.parent]={},Object.getPrototypeOf(this).reset.call(this))},lt="Loaded: must be called with the new operator",dt="Loaded: parentObjectName must be a string",ft="Loaded: keys must be an array",pt="Loaded: key is not a string";ut.prototype.is=function(t){if("string"!=typeof t)throw new Error(pt);if(1===this.root[this.parent][t])return!0;if(0===this.root[this.parent][t])return!1;throw new Error("Loaded: Key: "+this.parent+"."+t+" is neither set nor unset.")},ut.prototype.set=function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(t=e(t)).forEach(function(t){if("string"!=typeof t)throw new Error(pt);if(-1===n.keys.indexOf(t))throw new Error("Loaded: key cannot be found");n.root[n.parent][t]=i})},ut.prototype.reset=function(t){t?this.set(t,0):this.set(this.keys,0)};var mt=function(t){if(!(this instanceof mt))throw new Error(ht);if("object"!==(void 0===t?"undefined":E(t)))throw new Error(wt);this.state=st(t),this.changeHandlers=[]},gt="PageState:",vt=new at("PageState",!0),ht=gt+" must be called with the new operator",wt=gt+" initial state object must be defined";mt.prototype.enforceKey=function(t,e){if("string"!=typeof e)throw new Error("PageState: key must be a string identifier");if(!Object.prototype.hasOwnProperty.call(t,e))throw new Error(gt+" state does not contain key '"+e+"'")},mt.prototype.subscribe=function(t,e){var n=this;if(!e)throw new Error("PageState: keys must be a string or an array");var i=ct(e);i.forEach(function(t){return n.enforceKey(n.state,t)}),this.changeHandlers.push({handler:t,keys:i}),t(this.state)},mt.prototype.update=function(t){var e=this;if("object"!==(void 0===t?"undefined":E(t)))throw new Error("PageState: key value pairs to be updated must be provided within an object");var n=Object.keys(t);n.forEach(function(n){e.enforceKey(e.state,n);var i=t[n];e.state[n]=i,vt("'"+n+"' updated -> '"+i+"'")}),this.changeHandlers.filter(function(t){var e=t.keys;return n.some(function(t){return e.indexOf(t)>=0})}).forEach(function(t){(0,t.handler)(e.state)})},mt.prototype.getState=function(){return this.state};!function(){function t(e){if(C(this,t),!e)throw new Error("[traffic-splitter] A configuration object is required");if(!Object.prototype.hasOwnProperty.call(e,"percentAllowed"))throw new Error("[traffic-splitter] Percentage of devices to allow is required");if(!n(e.percentAllowed))throw new Error("[traffic-splitter] Percentage of devices to allow must be a number in the range 1-100 inclusive");this.percentAllowed=e.percentAllowed,this.deviceIdEnsured=!1}I(t,[{key:"ensureDeviceId",value:function(){this.deviceIdEnsured=!0;var t=window.Amigo.store.getDeviceID();if(t)return t;var e=window.Amigo.util.uuid.v4();return window.Amigo.store.saveDeviceID(e),window.Amigo.store.getDeviceID()}},{key:"deviceIsAllowed",value:function(){if(!this.deviceIdEnsured)throw new Error("ensureDeviceId must be called prior to checking if device is allowed");var t=window.Amigo.store.getDeviceID();return t?i({percentAllowed:this.percentAllowed,numChars:2},t):0!==this.percentAllowed}}])}();var yt=function t(){var e=Math.ceil(100*Math.random());return 0===e?t():e},_t=function(t){var e=window.parseInt(t,10);return!isNaN(e)&&e>=1&&e<=100},bt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yt,n=t.map(function(t){return"gg-experience-"+t+"-dice-roll"}),i={},o=new URL(window.location.href).searchParams;return t.forEach(function(t,r){var a="gg-experience-"+t+"-dice-roll",s=void 0,c=o.get(n[r]);s=o.has(n[r])&&""!==c?"random"!==c&&_t(c)?c:e():localStorage.getItem(a)||e(),s=parseInt(s,10),localStorage.setItem(a,s),i[t]=s}),i},St=function(){return{width:window.innerWidth,height:window.innerHeight}},Pt=function(t,e){if(-1!==[null,void 0,""].indexOf(e))return t;if(-1!==[null,void 0].indexOf(t))return t;var n=e.split("."),i=t[n.shift()];if(void 0===i)return null;for(;n.length;){if(void 0===i)return null;i=i[n.shift()]}return i},Et=T,Ct=function(){return document.querySelector(".navigation__summary").click(),new Promise(function(t){var e=setInterval(function(){var n=Array.prototype.map.call(document.querySelectorAll(".summary__list-group"),function(t){return{el:t,optionEls:t.querySelectorAll(".summary__list-cstic")}});if(0===n.length||n.some(function(t){return 0===t.optionEls.length})){var i=document.querySelector(".summary .summary__list-arrow:not(.summary__list-arrow--active):not(.amigo-clicked)");i&&(i.classList.add("amigo-clicked"),i.click())}else{var o=n.filter(function(t){return!!t.el.querySelector('[id^="edit-"]')}).map(function(t){return{title:t.el.querySelector(".summary__list-group-title").textContent,options:Array.prototype.map.call(t.optionEls,function(t){return{title:t.querySelector(".summary__list-cstic-title").textContent,idEl:t.querySelector('[id^="edit-"]')}}).filter(function(t){return!!t.idEl}).map(function(t){return{id:t.idEl.id.replace("edit-",""),title:t.title}})}});window.amigoData.browserData.configurator.structure=o;var r=o.map(function(t){return t.options.map(function(t){return t.id})}).flat();clearInterval(e),t({options:r,structure:o})}},200)})},It=!1,At=function(){kt=!0},Ot=function(){kt=!1},kt=!1,xt=function(t){var e=t.parent,n=t.section,i=t.speed,o=void 0===i?1e3:i,r=t.padding,a=void 0===r?0:r;window.$(e).animate({scrollTop:window.$(e).scrollTop()-window.$(e).offset().top+window.$(n).offset().top-a},o)},Ht=function(t){var e=t.nativeStructure,n=t.options,i=JSON.parse(JSON.stringify(e));i.forEach(function(t){return t.options.forEach(function(e){e.nativeSection=t.title})}),Lt.forEach(function(t){var e=i.find(function(e){return e.options.some(function(e){return e.id===t.id})}),n=i.find(function(e){return e.title===t.to}),o=t.after?n.options.findIndex(function(e){return e.id===t.after}):n.options.length-1;if(e&&n&&o>-1){var r=a(e.options,function(e){return e.id===t.id}),s=x(r,2),c=x(s[0],1)[0],u=s[1];e.options=u,n.options.splice(o+1,0,c)}}),Dt.forEach(function(t){var e=null,n=0;if(t.options.forEach(function(o){return i.forEach(function(i){var r=i.options.findIndex(function(t){return t.id===o});r>-1&&(n+=1,i.title===t.within&&(null===e||r<e)&&(e=r))})}),n===t.options.length){var o=[];i.forEach(function(e){var n=a(e.options,function(e){return t.options.includes(e.id)}),i=x(n,2),r=i[0],s=i[1];e.options=s,o.push.apply(o,H(r))});var r=i.find(function(e){return e.title===t.within});r.options.splice(null===e?r.options.length:e,0,{title:t.title,subOptions:o})}});var o=(i=i.filter(function(t){return t.options.length>0})).find(function(t){return"Paint"===t.title}),r=o.options.filter(function(t){return t.id!==Tt}),s=n[Tt];if(s){var c=s.items.filter(function(t){return t.mediaDescriptor&&t.mediaDescriptor[0]&&t.mediaDescriptor[0].url}).reduce(function(t,e){var n=/^([^-]+)/.exec(e.name)[1].trim();return t.add(n),t},new Set),u=[].concat(H(c)).map(function(t){return{id:Tt,title:t,nativeSection:"Paint",condition:function(e){return e.name.startsWith(t)}}});r.unshift.apply(r,H(u)),o.options=r}return i},Tt="CH_P16_EXT_PAINT",Dt=[{title:"Wheel Type & Finish",within:"Wheels & Brakes",options:["CH_P16_WHL_TYPE","CH_P16_WHL_FIN"]},{title:"Exterior pack options",within:"Exterior",options:["CH_P16_BLK_PK_CBOX","CH_P16_MSO_CF_PK_CBOX"]},{title:"Exhaust & Hot Vee Finishers",within:"Exterior",options:["CH_P16_EXHAUST","CH_P16_EXHAUST_FINISHER"]},{title:"Interior Specification",within:"Interior",options:["CH_P16_TRIM","CH_P16_INTERIOR"]},{title:"Interior Packs",within:"Interior",options:["CH_P16_GLOSS_INT_CBOX","CH_P16_CF_INTERIOR_CBOX"]},{title:"Seat Type & Belts",within:"Interior",options:["CH_P16_SEAT_TYPE","CH_P16_BELT"]},{title:"Additional McLaren Branding",within:"Interior",options:["CH_P16_DROPIN_MAT_EDGE","CH_P16_EMBOSS_AR_CBOX"]},{title:"Option Packs",within:"Interior",options:["CH_P16_PRACT_PK_CBOX","CH_P16_TECH_PK_CBOX"]},{title:"Additions",within:"Options",options:["CH_P16_VOL_ALARM_UP_CBOX","CH_P16_VEHITRCK_CBOX","CH_P16_WTFAK_CBOX","CH_P16_FIRE_EXT_CBOX","CH_P16_CAR_COVER_CBOX","CH_P16_ASHTRAY_CBOX","CH_GEN_PRINT_MANUAL"]}],Lt=[{id:"CH_P16_AUDIO",to:"Interior",after:"CH_P16_SILL_FIN"}],Nt=function(t){window.$(".navigation__item:not(.navigation__item--hidden)").filter(function(){return window.$(this).text().toLowerCase()===t.toLowerCase()}).click()},Rt=function(t,e){return new Promise(function(n){return it(function(){var n=document.querySelectorAll(t+" .info-button");return Array.prototype.find.call(n,function(t){var n=t.previousElementSibling;return qt(n.textContent)===qt(e)})||null},{pollTimeout:1e3,timeoutCallback:n},function(t){t.click(),n()})})},qt=function(t){return t.trim().toLowerCase()},jt=function(){return s(Ct,function(t){var e=t.options,n=t.structure,i=Ht({options:e,nativeStructure:n});Array.prototype.filter.call(document.querySelectorAll(".amigo-option[data-identifier]"),function(t){return!e.includes(t.getAttribute("data-identifier"))}).forEach(function(t){var e=t.closest("details");1===e.querySelectorAll(".amigo-option").length?e.remove():t.remove()}),i.forEach(function(t){var e=document.querySelector('.amigo-group[data-group-id="'+t.title+'"] .amigo-options-container');e&&t.options.forEach(function(t,n){var i=e.querySelector('details[data-identifier="'+(t.id||t.title)+'"]');if(i){if(t.subOptions){var o=i.querySelector(".amigo-suboptions");t.subOptions.forEach(function(t,e){if(!o.querySelector('.amigo-option[data-identifier="'+t.id+'"]')){var n=c(t);o.insertBefore(n,o.children[e])}})}}else{var r=u(t);e.insertBefore(r,e.children[n])}})})})},Bt=["CH_P16_EXHAUST_FINISHER","CH_P16_ENG_BEAUT","CH_P16_STR_WHL_GRIP","CH_P16_TRIM","CH_P16_INTERIOR"],Mt={CH_P16_TRIM:{nativeSection:"Specification",optionSelector:".specification-cstic"}},Xt=[{option:"CH_P16_BLK_PK_CBOX",item:"Y",inclusiveItems:[{option:"CH_P16_EXHAUST_FINISHER",item:"STEALTH"}]},{option:"CH_P16_MSO_CF_PK_CBOX",item:"Y",inclusiveItems:[{option:"CH_P16_AUDIO",item:"BW"},{option:"CH_P16_MIRROR_CASING",item:"CF"}]},{option:"CH_P16_TECH_PK_CBOX",item:"Y",inclusiveItems:[{option:"CH_P16_AUDIO",item:"BW"}]}],Ut=function(t,e){return function(n,i){return'\n    <gg-tooltip class="tooltip gg-icon-option">\n        <div class="tooltip-label">\n            <div data-option-id="'+t+'" data-item-name="'+n[e]+'" data-item-index="'+i+'" class="amigo-item-img '+(n.assigned?"amigo-selected":"")+'">\n                <img src="'+n.mediaDescriptor[0].url+'" />\n            </div>\n        </div>\n        <div class="tooltip-popover">\n            <div class="tooltip-popover-content">\n                '+n.name+" "+(n.ggPriceText||"")+"\n            </div>\n        </div>\n    </gg-tooltip>\n    "}},Jt="amigoData.browserData.pluginVars.renderOptions.disableDomSync",Ft=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.pricing,i=void 0===n?{}:n,o=e.summaryPath,r=e.onSummaryUpdated;try{return m(p(function(){if(!Pt(window,Jt))return f(jt)},function(){var e={},n=!!i.currencySymbol&&i.basePrice&&i.options,a=function(t){return""+i.currencySymbol+t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};if(Object.keys(t).forEach(function(o){var r=t[o],s=document.querySelectorAll('.amigo-options[data-option-id="'+o+'"]'),c=n&&i.options[o],u=0,l=null,d={};r.items&&(r.items=r.items.map(function(t){if(t.assigned&&(d={id:t.identifier}),n&&c){var e=c[t.identifier];if(t.assigned&&(d.price=e||0),e){var i=a(e);return t.assigned&&(l=i),(!u||e<u)&&(u=e),Object.assign({},t,{ggPrice:e,ggPriceText:i})}}return t})),e[o]=d,s.length>0&&s.forEach(function(t){var e=null,s=void 0,c=null;if(g(r)){var d=!(r.items.some(function(t){return"Y"===t.identifier})&&r.items.some(function(t){return"N"===t.identifier})),f=r.items.find(function(t){return"Y"===t.identifier}),p=f&&f.ggPriceText,m="true"===t.getAttribute("data-suboption"),y=t.getAttribute("data-section-id"),_=v(r);if(s='\n                    <label data-option-id="'+o+'" data-item-index="0" class="amigo-control amigo-checkbox '+(d?"amigo-disabled":"")+'">\n                        <input type="checkbox" '+(h(r)?'checked="checked"':"")+" "+(d?"disabled":"")+' />\n                        <div class="amigo-description">\n                            '+(_||m&&y||"Include?")+'\n                        </div>\n                        <span class="amigo-checkmark"></span>\n                        '+(n&&p?'<span class="amigo-option-price">'+p+"</span>":"")+"\n                    </label>\n                ",!_&&m&&y){var b=t.previousElementSibling;b&&"H4"===b.tagName&&(b.style.display="none")}}else if(w(r)&&!Bt.includes(o)){var S=r.items.filter(function(t){return t.mediaDescriptor&&t.mediaDescriptor[0]&&t.mediaDescriptor[0].url});if("CH_P16_EXT_PAINT"===o){var P=t.getAttribute("data-section-id");S=S.filter(function(t){return t.name.startsWith(P)}),n&&(u=Math.min.apply(Math,H(S.map(function(t){return t.ggPrice||0}))))}var E=Ut(o,r.label);s=S.map(E).join("");var C=S.find(function(t){return t.assigned});e=C?C.name:null}else{var I=r.items.filter(function(t){return!!t[r.label]}),A=1===I.length;c=Mt[o],s=I.map(function(t,e){return'\n                    <label data-option-id="'+o+'" data-item-name="'+t[r.label]+'" data-item-index="'+e+'" class="amigo-control amigo-radio '+(A?"amigo-disabled":"")+'">\n                        <input type="radio" name="'+o+'" '+(t.assigned?"checked":"")+" "+(A?"disabled":"")+' />\n                            <div class="amigo-control-label">\n                                '+t[r.label]+"\n                                "+(c?'<button class="info-button amigo-info-button" data-name="'+t[r.label]+'">Info</button>':"")+'\n                            </div>\n                        <span class="amigo-checkmark"></span>\n                        '+(n&&t.ggPriceText?'<span class="amigo-option-price">'+t.ggPriceText+"</span>":"")+"\n                    </label>\n                "}).join("")}t.innerHTML=s;var O=!!t.getAttribute("data-suboption");if(c&&t.querySelectorAll(".amigo-info-button").forEach(function(t){t.addEventListener("click",function(t){Et(window,Jt,!0);var e=document.querySelector(".modals");e&&(e.style.display="unset"),Nt(c.nativeSection),Rt(c.optionSelector,t.target.attributes["data-name"].value).then(function(){Et(window,Jt,!1)})})}),i){var k=O?t.previousElementSibling:t.closest("details");if(k){var x=k.querySelector(".amigo-price-from");x&&(x.textContent=u?"From "+a(u):"Included")}}var T=O?t.previousElementSibling:t.parentNode;if(T){var D=T.querySelector(".amigo-selected-value");D&&(D.textContent=e?(O?" - ":"")+e+(l?" ("+l+")":""):"")}})}),o){var s=Pt(window,o)||{options:{}};Object.assign(s.options,e),n&&(Xt.forEach(function(t){s.options[t.option]&&s.options[t.option].id===t.item&&t.inclusiveItems.forEach(function(t){s.options[t.option]&&s.options[t.option].id===t.item&&(s.options[t.option].standalonePrice=s.options[t.option].price,s.options[t.option].price=0)})}),s.basePrice=i.basePrice,s.totalPrice=s.basePrice+Object.values(s.options).reduce(function(t,e){return t+(e.price||0)},0),s.totalPriceFormatted=a(s.totalPrice)),Et(window,o,s),r&&window.Amigo.emit(r,s)}}))}catch(t){return Promise.reject(t)}},Kt=!1;Object.setPrototypeOf(y.prototype,HTMLElement.prototype),Object.setPrototypeOf(y,HTMLElement);var Wt=!1,Vt=["auto","hidden","scroll"],Yt={selectOption:function(t,e,n){document.querySelector(".navigation__summary").click();var i=document.querySelector(".modals");i.style.display="none";var o=!1;return new Promise(function(e){var n=window.setInterval(function(){var i=document.getElementById("edit-"+t);if(i)window.clearInterval(n),e(i);else{var r=document.querySelector(".summary .summary__list-arrow:not(.summary__list-arrow--active)");r&&!o&&(o=!0,r.click())}},100)}).then(function(t){return t.click(),new Promise(function(t){var o=window.setInterval(function(){var r=i.querySelector(".toggle-cstic"),a=2===i.querySelectorAll(".circle").length&&1===i.querySelectorAll(".circle.circle--checked").length&&document.querySelector(".circle:not(.circle--checked)"),s=e&&document.querySelector('[alt="'+e+'"]'),c=e&&Array.prototype.filter.call(i.querySelectorAll("span"),function(t){return t.innerText===e}).pop(),u=i.querySelectorAll("[class*=-cstic__image-value] > img")[n],l=r||a||s||c||u;l&&(window.clearInterval(o),t(l))},100)})}).then(function(t){t.click(),document.querySelector(".modal__close-button").click()})},setupConfiguratorData:function(){if(It)return Promise.resolve();It=!0,window.amigoData.browserData.configurator=window.amigoData.browserData.configurator||{},window.amigoData.browserData.configurator.options=window.amigoData.browserData.configurator.options||{};var t=XMLHttpRequest.prototype.open;return XMLHttpRequest.prototype.open=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=n[1];if(/ajaxGetCharacteristicValues/.test(o)){var r=new URLSearchParams(o.split("?").pop()).get("csticName");this.addEventListener("readystatechange",function(){if(4===this.readyState){var t=void 0;try{t=JSON.parse(this.response)}catch(e){t={error:e.message}}window.amigoData.browserData.configurator.options[r]=t}})}t.apply(this,n)},Ct().then(function(t){var e=t.options;return new Promise(function(t){var n=setInterval(function(){var i=Object.keys(window.amigoData.browserData.configurator.options);e.some(function(t){return!i.includes(t)})||(clearInterval(n),t())},200)})})},trackMenuWaypoints:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).focusCarPart,e=void 0!==t&&t,n=document.querySelectorAll(".amigo-group-title[data-group]"),i=document.querySelector("#amigo-config-options"),a=null;i.addEventListener("scroll",function(){var t=Math.abs(i.scrollHeight-i.scrollTop-i.clientHeight)<1;if(i.classList[t?"add":"remove"]("amigo-scroll-end"),!kt){var s=Array.prototype.map.call(n,function(t,e){return{id:t.attributes["data-group"].value,el:t,visible:o(i,t),index:e}}),c=s.find(function(t){return t.visible}),u=!(a&&c&&a.id===c.id),l=void 0;if(c?(l=c.id,a=c):a&&(l=r(i,a.el)?a.id:s[a.index-1].id),l){var d=document.querySelectorAll('.amigo-nav-step.amigo-active:not([data-group="'+l+'"])');if(d.length>0&&(d.forEach(function(t){return t.classList.remove("amigo-active")}),document.querySelectorAll('.amigo-nav-step[data-group="'+l+'"]').forEach(function(t){return t.classList.add("amigo-active")}),e)){var f=Array.prototype.find.call(document.querySelectorAll(".navigation__item:not(.navigation__item--hidden)"),function(t){return t.textContent.toLowerCase()===l.toLowerCase()});f&&f.click()}u&&document.querySelectorAll("#amigo-nav-steps").forEach(function(t){var e=t.querySelector(".amigo-active");if(t.scrollWidth>0&&e){var n=e.getBoundingClientRect(),i=t.clientWidth,o=void 0;n.x<0?o=n.x:n.right>i&&(o=n.right-i),o&&(t.scrollLeft+=o)}})}}},{passive:!0})},enableTracking:Ot,disableTracking:At,scrollToSection:xt,generateDisplayStructure:Ht,ensureOnlyOneSectionAtOnce:function(){var t=document.querySelector("#amigo-configurator");t.addEventListener("click",function(e){if(e.target.matches("summary.amigo-option-header")){var n=window.$(e.target),i=n.offset().top;t.querySelectorAll("details").forEach(function(t){t!==e.target.parentNode&&t.removeAttribute("open")});var o=n.offset().top,r=window.$("#amigo-config-options");window.matchMedia("screen and (max-width: 812px)").matches?(At(),xt({parent:r,section:n,speed:500}),setTimeout(function(){return Ot()},500)):r.scrollTop(r.scrollTop()-(i-o))}})},syncViewOnOptionSelection:function(){window.$("#amigo-configurator").click(function(t){if(t.target.matches("[data-item-name],[data-item-index],.amigo-option-header")){var e=window.$(t.target).closest("[data-native-section]").attr("data-native-section");e&&Nt(e)}})},renderOptions:Ft,syncOptionUpdates:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.pricing,n=void 0===e?{}:e,i=t.summaryPath,o=t.onSummaryUpdated;if(!Kt){Kt=!0;var r=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];var s=e[1];if(/ajaxGetCharacteristicValues/.test(s)){var c=new URLSearchParams(s.split("?").pop()).get("csticName");this.addEventListener("readystatechange",function(){if(4===this.readyState){var t=void 0;try{t=JSON.parse(this.response)}catch(e){t={error:e.message}}Ft(A({},c,t),{pricing:n,summaryPath:i,onSummaryUpdated:o})}})}r.apply(this,e)}}},registerCustomElements:function(){Wt||(Wt=!0,customElements.define("gg-tooltip",function(t){function e(){return C(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return O(e,y),I(e,[{key:"connectedCallback",value:function(){this.setup()}},{key:"toggle",value:function(){this.classList.contains("tooltip--open")?this.close():this.open()}},{key:"open",value:function(){this.classList.add("tooltip--open"),this.handleDropdownPosition()}},{key:"close",value:function(){this.classList.remove("tooltip--open")}},{key:"handleDropdownPosition",value:function(){var t=this.container.getBoundingClientRect(),e=this.label.getBoundingClientRect(),n=this.dropdown.getBoundingClientRect(),i=t.x+t.width,o=n.x+n.width,r=e.x+e.width;n.x<t.x?(this.dropdown.style.left=0,this.dropdown.style.right="auto",this.dropdown.style.transform="translateX("+(10-(e.x-t.x))+"px)"):o>i&&(this.dropdown.style.left="auto",this.dropdown.style.right="0",this.dropdown.style.transform="translateX("+(i-r-10)+"px)")}},{key:"setup",value:function(){var t=this;this.label=this.querySelector(".tooltip-label"),this.dropdown=this.querySelector(".tooltip-popover"),this.label.addEventListener("mouseover",function(){return t.handleDropdownPosition()}),this.label.addEventListener("touchstart",function(){return t.toggle()});var e=b(this);this.container=e.find(function(t){var e=getComputedStyle(t);return[e.overflow,e.overflowX,e.overflowY].some(function(t){return Vt.includes(t)})})||document.body}}]),e}()),document.addEventListener("touchstart",function(t){return _(t)}))},clickNativeInfoButton:Rt,getNativeOptions:Ct,syncConfiguratorDom:jt};t.default=P;var Gt=["configurator_2_0"],$t=/^https:\/\/configurator\.mclaren\.com\/mclaren-ui\/\?(.*&)?(profile|load)\//,zt=/[a-z]+_([A-Z]+)/;t.default=t.default,t.rewire=function(e){t.default=e},t.restore=function(){t.default=P}}(this.amigoMain=this.amigoMain||{});

/*! !!_CUSTOM_CLIENT_SIDE_!! !*/
return"function"==typeof amigoMain?amigoMain:"object"==typeof this.amigoMain&&"function"==typeof this.amigoMain.default?this.amigoMain.default:null}();a.prototype.listeners=null,a.prototype.addEventListener=function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)},a.prototype.removeEventListener=function(e,t){e in this.listeners&&(this.listeners[e]=this.listeners[e].filter(function(e){return e!==t}))},a.prototype.dispatchEvent=function(e){if("type"in e&&e.type in this.listeners){var t=this.listeners[e.type];if(t){e.target=this;for(var o=0,n=t.length;o<n;o++)"function"==typeof t[o]&&t[o].call(this,e)}}},o.exports={loader:f(),log:r}},{"../plugins/data-augmenter":8,"../plugins/store":13,"../util/data-compression":22,"../util/get-amigo-data":23,"../util/get-data-from-conf":24,"../util/loop-detection":25,"../util/ring-buffer":26,"../util/security-checks":27,"./detect-ie":20,"./page-support":21,uuid:3}],20:[function(e,t,o){t.exports=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10)}},{}],21:[function(e,t,o){function n(){return window.Promise&&"resolve"in window.Promise&&"reject"in window.Promise&&"all"in window.Promise&&"race"in window.Promise&&function(){var e;return new window.Promise(function(t){e=t}),"function"==typeof e}()}function i(){return"function"==typeof window.fetch}function r(){return"function"==typeof window.jQuery&&"fn"in window.jQuery}function a(){return window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest}function s(){return window.XDomainRequest&&"responseText"in new window.XDomainRequest}t.exports=function(e){e({Promise:!!n(),fetch:!!i(),jQuery:!!r(),cors:!!a(),xDomainRequest:!!s()})}},{}],22:[function(e,t,o){var n=e("lz-string"),i={amigo:{},customData:{},personData:{},sessionData:{},deviceData:{},metaTags:{}};t.exports={compress:function(e,t,o,r){var a={};return a.s=e||{},a.a=t||i,a.p=o||[],r&&(a.e=r),n.compressToEncodedURIComponent(JSON.stringify(a))},decompress:function(e){var t=JSON.parse(n.decompressFromEncodedURIComponent(e)),o={pageSupport:t.s||{},amigoAugmented:t.a||i,currentPlugins:t.p||[]};return t.e&&(o.event=t.e),o}}},{"lz-string":1}],23:[function(e,t,o){function n(e){return"[object Object]"===Object.prototype.toString.call(e)}function i(e){return n(e)?Object.keys(e).filter(function(e){return"_"!==e[0]}).reduce(function(t,o){return t[o]=i(e[o],!1),t},{}):e}function r(e){return i(Object.keys(e).filter(function(e){return"browserData"!==e}).reduce(function(t,o){return t[o]=e[o],t},{}))}function a(e){var t=JSON.parse(JSON.stringify(r(window.amigoData||{})));return e&&(t.sharepointName=e),t}t.exports=a},{}],24:[function(e,t,o){function n(e,t){for(var o=t.split("."),n=e[o.shift()];o.length;)n=n[o.shift()];return n}function i(e){if(!e)throw new Error("No configuration object given");if(!("ams"in e))throw new Error("AMS object not given");var t=e.log||window&&"Amigo"in window&&"util"in window.Amigo&&window.Amigo.util.log||function(){},o=n(e,"ams.vars");if(!o)throw new Error("AMS variables not given");return a.buildProxy(o,t)}function r(e){if(!e)throw new Error("No configuration object given");var t=e.log||window&&"Amigo"in window&&"util"in window.Amigo&&window.Amigo.util.log||function(){};return"ams"in e&&"vars"in e.ams&&(e=e.ams.vars),a.buildProxy(e,t)}var a=function(){function t(e){return s(e).toLowerCase()}function o(e,t){return t in e}function n(e,n){return e.replace(/{{ jit:(.+?) }}/g,function(e,i){for(var r=function(e){n('[JIT AMS] mapping of "'+i+'" could not be resolved - '+e)},a=i.split("."),s=window,c=0;c<a.length;c+=1){var d=a[c];if(!o(s,d))return r('"'+d+'" key not found in parent'),"";if(void 0===(s=s[d])||null===s)return r('value of "'+d+'" is '+s),""}var l=t(s);return[u.String,u.Number,u.Boolean,u.Object,u.Array].indexOf(l)===-1?(r('value of "'+a.pop()+'" is a '+l+", only strings, numbers, objects and arrays are permitted"),""):[u.Object,u.Array].indexOf(l)!==-1?JSON.stringify(s):s})}function i(e){var o=t(e);return o===u.Array||o===u.Object}function r(e){return t(e)===u.String}function a(e,t){if(i(e)){var s=e;return Object.keys(e).forEach(function(u){var c="__"+u,d=o(e,c)?e[c]:e[u];Object.defineProperty(s,u,{get:function(){var e=this[c];return i(d)?a(e,t):r(e)?n(e,t):e},set:function(e){Object.defineProperty(this,c,{value:e,enumerable:!1,configurable:!0})}}),s[u]=d}),s}return e}var s=e("type-detect"),u={Object:t({}),Array:t([]),Boolean:t(!0),String:t(""),Number:t(3.14)};return{buildProxy:a}}();t.exports={getAllPluginVars:i,getPluginVars:function(e,t,o){void 0===o&&(o=!0);var r=i(e),a=n(r,t);if(!a)throw new Error("AMS variables not given in ams.vars."+t);if(!o){var s={};return Object.keys(a).forEach(function(e){null!==a[e]&&void 0!==a[e]&&(s[e]=a[e])}),s}return a},getId:function(e){return n(e,"ams.id")},wrapConf:r}},{"type-detect":2}],25:[function(e,t,o){function n(e,t,o,n){this.bucketSizeMS=e,this.threshold=t,this.numberOfBucketsOverThresholdToTrigger=o,this.numberOfBuckets=n||this.numberOfBucketsOverThresholdToTrigger,this.maxTimeToHold=this.numberOfBuckets*this.bucketSizeMS,this.buckets=[]}n.prototype.addAndCheck=function(){for(var e=Date.now(),t=0;t<this.buckets.length&&(this.buckets.length>0&&this.buckets[0].start<e-this.maxTimeToHold);t++)this.buckets.shift();(0==this.buckets.length||this.buckets[this.buckets.length-1].start<=e-this.bucketSizeMS)&&this.buckets.push({start:e,count:0}),this.buckets[this.buckets.length-1].count++;for(var o=0,t=0;t<this.buckets.length;t++)this.buckets[t].count>this.threshold&&o++;return o>=this.numberOfBucketsOverThresholdToTrigger},t.exports=n},{}],26:[function(e,t,o){function n(e){this.size=e||100,this.arr=[],this.idx=0}n.prototype.add=function(e){this.arr[this.idx]=e,this.idx=(this.idx+1)%this.size},n.prototype.readout=function(){for(var e=[],t=0;t<this.arr.length;t++)e.push(this.arr[(this.idx+t)%this.arr.length]);return e},t.exports=n},{}],27:[function(e,t,o){function n(e){"string"!=typeof e&&(e=""+e);var t=e.replace(/[^0-9]/g,"");if(t.length<10)return!1;for(var o,n=0,i=1,r=t.length-1;r>=0;r--)o=Number(t.charAt(r))*i,o>9&&(n+=1,o-=10),n+=o,i=1==i?2:1;return n%10==0}function i(e){return n(e)?("string"!=typeof e&&(e=""+e),"[REDACTED]"+e.substring(e.length-4)):e}function r(e){return"string"!=typeof e&&(e=""+e),d.lastIndex=0,d.test(e)}function a(e){return"string"!=typeof e&&(e=""+e),e.replace(d,function(e,t,o,n){return t+i(o)+n})}function s(e){return"string"!=typeof e&&(e=""+e),l.lastIndex=0,l.test(e)}function u(e){return s(e)?"[REDACTED]":e}function c(e){if(null===e||void 0===e||"boolean"==typeof e)return e;if("string"==typeof e){if(s(e))try{var t=JSON.parse(e);return JSON.stringify(c(t))}catch(e){return"[REDACTED]"}return a(e)}return"number"==typeof e?r(e)?"[REDACTED]":e:Array.isArray&&Array.isArray(e)?e.map(c):e instanceof Error?a(u(e.toString())):"object"==typeof e&&Object.keys?Object.keys(e).reduce(function(t,o){return s(o)?t:(t[a(o)]=c(e[o]),t)},{}):e.toString?a(u(e.toString())):null}var d=new RegExp("(^|[\\\"\\' :,])([56](?:[ -]?\\d){11,18}|3(?:[ -]?\\d){13,18}|[1-9](?:[ -]?\\d){15,18})($|[^\\da-zA-Z-])","g"),l=new RegExp("password","gi");t.exports={creditcard:{check:n,sanitize:i,quickCheck:r,replace:a},cloneAndReplaceAll:c}},{}]},{},[19])}();;
})();